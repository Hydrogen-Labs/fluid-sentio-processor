import { NamedResultDescriptor } from './metadata.js';
import { MapStateStorage } from '@sentio/runtime';
export class ExporterState extends MapStateStorage {
    static INSTANCE = new ExporterState();
}
export class Exporter extends NamedResultDescriptor {
    static register(name, channel) {
        const exporter = new Exporter(name, channel);
        return ExporterState.INSTANCE.getOrSetValue(name, exporter);
    }
    channel;
    constructor(name, channel) {
        super(name);
        this.channel = channel;
    }
    emit(ctx, data) {
        const res = {
            metadata: ctx.getMetaData(this.name, {}),
            payload: JSON.stringify(data),
            runtimeInfo: undefined,
        };
        ctx.update({ exports: [res] });
    }
}
//# sourceMappingURL=exporter.js.map